import{_ as k,a as N}from"./BsN4w72y.js";import{_ as S}from"./C_mQfGGG.js";import{d as B,r as c,o as F,c as a,b as o,j as u,e as t,t as n,k as p,n as f,F as g,g as b,m as C,l as h,_ as D}from"./3bhyZd_0.js";import{u as L}from"./BH9fYHoZ.js";const V={class:"min-h-screen bg-white font-sans text-gray-900"},$={class:"bg-gray-50 border-b border-gray-200 pt-32 pb-12"},z={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},A={class:"text-4xl font-black text-gray-900 tracking-tighter mb-2"},U={key:0,class:"text-gray-500"},j={key:1,class:"flex items-center gap-2 text-sm text-gray-600 bg-blue-50 border border-blue-100 px-4 py-2 rounded-lg inline-flex mt-2"},H={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16"},M={key:0,class:"space-y-8"},P={key:1,class:"space-y-12"},T={class:"flex flex-col md:flex-row gap-8 items-start"},W={class:"w-full md:w-48 aspect-video bg-gray-100 rounded-lg overflow-hidden shrink-0"},Y={class:"flex items-center gap-2 mb-2 text-xs font-bold uppercase tracking-widest"},E={class:"text-blue-600"},I={class:"text-gray-500"},O={class:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition-colors"},R={class:"text-gray-500 text-sm leading-relaxed line-clamp-2"},X={key:0,class:"text-center pt-12 border-t border-gray-100"},Z=B({__name:"index",setup(q){const m=c(!0),d=c([]),x=c(0),r=c(!1);F(async()=>{const l=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);i&&i.startsWith("ops-follow-")&&l.push(i.replace("ops-follow-",""))}if(x.value=l.length,l.length>0){r.value=!0;try{d.value=await $fetch("/api/feed",{method:"POST",body:{slugs:l}})}catch{}}else{r.value=!1;const{data:e}=await L("/api/stories","$CsziRX82BM");d.value=e.value?.slice(0,10)||[]}m.value=!1});const y=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"});return(l,e)=>{const i=k,v=S,_=D,w=N;return o(),a(g,null,[u(i),t("div",V,[t("div",$,[t("div",z,[t("h1",A,n(r.value?"Your Feed":"Latest Updates"),1),r.value?(o(),a("p",U,[e[0]||(e[0]=p(" Updates from the ",-1)),t("strong",null,n(x.value),1),e[1]||(e[1]=p(" organizations you follow. ",-1))])):(o(),a("div",j,[...e[2]||(e[2]=[t("span",{class:"w-2 h-2 rounded-full bg-blue-600 animate-pulse"},null,-1),p(" You aren't following anyone yet. Here is what's trending today. ",-1)])]))])]),t("div",H,[m.value?(o(),a("div",M,[(o(),a(g,null,b(3,s=>t("div",{key:s,class:"h-48 bg-gray-100 rounded-xl animate-pulse"})),64))])):d.value.length>0?(o(),a("div",P,[(o(!0),a(g,null,b(d.value,s=>(o(),C(_,{key:s.slug,to:`/stories/${s.slug}`,class:"group block border-b border-gray-100 pb-12 last:border-0"},{default:h(()=>[t("div",T,[t("div",W,[u(v,{src:s.image,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},null,8,["src"])]),t("div",null,[t("div",Y,[t("span",E,n(s.companyName||s.category),1),e[3]||(e[3]=t("span",{class:"text-gray-300"},"â€¢",-1)),t("span",I,n(y(s.date||s.publishedAt)),1)]),t("h3",O,n(s.title),1),t("p",R,n(s.excerpt),1)])])]),_:2},1032,["to"]))),128)),r.value?f("",!0):(o(),a("div",X,[e[5]||(e[5]=t("p",{class:"text-gray-900 font-bold mb-2"},"Want a better feed?",-1)),e[6]||(e[6]=t("p",{class:"text-gray-500 text-sm mb-6"},"Follow specific companies to curate this page.",-1)),u(_,{to:"/companies",class:"px-6 py-3 bg-black text-white rounded-lg font-bold text-sm hover:bg-gray-800 transition-colors"},{default:h(()=>[...e[4]||(e[4]=[p(" Browse Directory ",-1)])]),_:1})]))])):f("",!0)])]),u(w)],64)}}});export{Z as default};
