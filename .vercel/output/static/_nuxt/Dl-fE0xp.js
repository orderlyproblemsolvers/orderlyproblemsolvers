import{u as _}from"./BH9fYHoZ.js";import{d as f,h as v,r as w,c as o,e,t as d,u as a,F as x,g as y,f as k,b as r,p as C,n as j,k as N}from"./3bhyZd_0.js";const D={class:"max-w-5xl mx-auto"},A={class:"flex items-center justify-between mb-8"},B={class:"bg-white px-4 py-2 rounded-lg border border-gray-200 text-xs font-bold shadow-sm"},F={key:0,class:"space-y-4"},I={key:1,class:"p-8 bg-red-50 text-red-600 rounded-xl border border-red-100"},S={class:"text-sm mt-1"},V={key:2,class:"py-24 text-center bg-white rounded-xl border border-dashed border-gray-300"},$={key:3,class:"space-y-6"},z={class:"flex justify-between items-center mb-4 pb-4 border-b border-gray-100"},P={class:"flex items-center gap-3"},E={class:"text-xs font-mono text-gray-400"},L={class:"text-xs font-bold text-gray-400"},R={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},T={class:"md:col-span-8"},q={class:"text-xl font-black text-gray-900 mb-1"},M={class:"text-sm font-bold text-gray-500 mb-4"},O={class:"bg-gray-50 p-4 rounded-lg text-sm text-gray-600 leading-relaxed border border-gray-100 font-medium"},Q={class:"md:col-span-4 flex flex-col justify-center gap-3 border-t md:border-t-0 md:border-l border-gray-100 pt-4 md:pt-0 md:pl-6"},Y=["onClick","disabled"],G={key:0,class:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"},H=["onClick","disabled"],W=f({__name:"index",async setup(J){let l,p;const{data:i,refresh:h,status:m,error:u}=([l,p]=v(()=>_("/api/admin/submissions/pending","$qr0ztwYfaN")),l=await l,p(),l),n=w(null),g=async(c,s,t)=>{n.value=c;try{await $fetch("/api/admin/submissions/decide",{method:"POST",body:{id:c,type:s,status:t}}),await h()}catch(b){alert("Error processing submission: "+b.message)}finally{n.value=null}};return(c,s)=>(r(),o("div",D,[e("div",A,[s[0]||(s[0]=e("div",null,[e("h1",{class:"text-3xl font-black tracking-tight text-gray-900 mb-1"},"Incoming Queue"),e("p",{class:"text-sm text-gray-500"},"Review and verify community submissions.")],-1)),e("div",B,d(a(i)?.length||0)+" Pending ",1)]),a(m)==="pending"?(r(),o("div",F,[(r(),o(x,null,y(3,t=>e("div",{key:t,class:"h-48 bg-gray-100 rounded-xl animate-pulse border border-gray-200"})),64))])):a(u)?(r(),o("div",I,[s[1]||(s[1]=e("p",{class:"font-bold"},"Failed to load submissions.",-1)),e("p",S,d(a(u).message),1)])):!a(i)||a(i).length===0?(r(),o("div",V,[...s[2]||(s[2]=[k('<div class="w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-300"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><p class="text-gray-900 font-bold text-lg">All caught up!</p><p class="text-sm text-gray-500">No pending submissions waiting for review.</p>',3)])])):(r(),o("div",$,[(r(!0),o(x,null,y(a(i),t=>(r(),o("div",{key:t.id+t.type,class:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm transition-all hover:shadow-md hover:border-blue-200 group"},[e("div",z,[e("div",P,[e("span",{class:C(["px-2.5 py-1 text-[10px] font-bold uppercase rounded border tracking-wider",t.type==="company"?"bg-blue-50 text-blue-700 border-blue-100":"bg-purple-50 text-purple-700 border-purple-100"])},d(t.type),3),e("span",E," ID: #"+d(t.id),1)]),e("span",L,d(new Date(t.createdAt).toLocaleDateString()),1)]),e("div",R,[e("div",T,[e("h3",q,d(t.name),1),e("p",M,d(t.info),1),e("div",O,' "'+d(t.description)+'" ',1)]),e("div",Q,[e("button",{onClick:b=>g(t.id,t.type,"approved"),disabled:n.value===t.id,class:"w-full py-3 bg-black text-white text-xs font-bold rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[n.value===t.id?(r(),o("span",G)):j("",!0),s[3]||(s[3]=N(" Approve & Publish ",-1))],8,Y),e("button",{onClick:b=>g(t.id,t.type,"rejected"),disabled:n.value===t.id,class:"w-full py-3 border border-gray-200 text-gray-600 text-xs font-bold rounded-lg hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition-colors disabled:opacity-50"}," Reject ",8,H)])])]))),128))]))]))}});export{W as default};
