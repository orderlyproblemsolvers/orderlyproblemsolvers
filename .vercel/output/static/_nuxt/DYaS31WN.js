import{d as h,r as m,h as T,S as E,c as n,e as l,j as x,l as F,w as s,v as r,T as L,F as g,g as f,u as N,U as v,x as y,R,n as B,k as p,t as b,_ as M,y as A,b as d}from"./B9RLFzUu.js";import{_ as $}from"./D9KDMeDl.js";import{u as j}from"./BMu-BY4t.js";const q={class:"max-w-2xl mx-auto"},K={class:"flex items-center justify-between mb-8"},D={class:"grid grid-cols-2 gap-6"},W={class:"grid grid-cols-2 gap-6"},z=["value"],J={class:"grid grid-cols-2 gap-6"},O={class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white flex flex-wrap gap-2 items-center focus-within:border-black focus-within:ring-1 focus-within:ring-black transition-all min-h-[46px]"},_=["onClick"],G=["onKeydown"],H={class:"flex items-center gap-3 border-t border-gray-100 pt-4"},Q={class:"pt-4"},X=["disabled"],Y={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},ae=h({__name:"new",async setup(Z){let i,c;const k=A(),u=m(!1),{data:w}=([i,c]=T(()=>j("/api/companies","$E29WmcImRe")),i=await i,c(),i),t=m({name:"",slug:"",role:"",bio:"",location:"",email:"",website:"",companyId:null,avatar:"",featured:!1,stack:[],stackInput:""});E(()=>t.value.name,a=>{t.value.slug=a.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")});const V=()=>{const a=t.value.stackInput.trim();a&&!t.value.stack.includes(a)&&t.value.stack.push(a),t.value.stackInput=""},S=a=>{t.value.stack.splice(a,1)},U=async()=>{u.value=!0;try{await $fetch("/api/people",{method:"POST",body:t.value}),alert("Person Added Successfully!"),k.push("/admin/dashboard")}catch(a){alert(a.data?.statusMessage||"Error creating profile")}finally{u.value=!1}};return(a,e)=>{const I=M,C=$;return d(),n("div",q,[l("div",K,[e[13]||(e[13]=l("h1",{class:"text-2xl font-black text-gray-900"},"Add Person",-1)),x(I,{to:"/admin/dashboard",class:"text-sm font-bold text-gray-500 hover:text-black"},{default:F(()=>[...e[12]||(e[12]=[p("Cancel",-1)])]),_:1})]),l("form",{onSubmit:y(U,["prevent"]),class:"space-y-6 bg-white p-8 rounded-xl border border-gray-200 shadow-sm"},[l("div",D,[l("div",null,[e[14]||(e[14]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Full Name",-1)),s(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"Sarah Jenkins"},null,512),[[r,t.value.name]])]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Slug",-1)),s(l("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.slug=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none bg-gray-50"},null,512),[[r,t.value.slug]])])]),l("div",null,[x(C,{modelValue:t.value.avatar,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.avatar=o),label:"Profile Picture"},null,8,["modelValue"])]),l("div",W,[l("div",null,[e[16]||(e[16]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Role / Title",-1)),s(l("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.role=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"Senior Engineer"},null,512),[[r,t.value.role]])]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Company",-1)),s(l("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.companyId=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none bg-white"},[e[17]||(e[17]=l("option",{value:null},"Freelance / Unemployed",-1)),(d(!0),n(g,null,f(N(w),o=>(d(),n("option",{key:o.id,value:o.id},b(o.name),9,z))),128))],512),[[L,t.value.companyId]])])]),l("div",J,[l("div",null,[e[19]||(e[19]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Email (Public)",-1)),s(l("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.email=o),type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"contact@example.com"},null,512),[[r,t.value.email]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Website / Portfolio",-1)),s(l("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.website=o),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"https://"},null,512),[[r,t.value.website]])])]),l("div",null,[e[21]||(e[21]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Location",-1)),s(l("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.location=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"Remote / Lagos"},null,512),[[r,t.value.location]])]),l("div",null,[e[22]||(e[22]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-2"},"Skills / Stack",-1)),l("div",O,[(d(!0),n(g,null,f(t.value.stack,(o,P)=>(d(),n("span",{key:o,class:"bg-black text-white text-xs font-bold px-2 py-1 rounded flex items-center gap-1 animate-in fade-in zoom-in duration-200"},[p(b(o)+" ",1),l("button",{onClick:ee=>S(P),type:"button",class:"hover:text-gray-300 focus:outline-none font-mono"},"Ã—",8,_)]))),128)),s(l("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.stackInput=o),onKeydown:[v(y(V,["prevent"]),["enter"]),e[9]||(e[9]=v(o=>t.value.stackInput===""&&t.value.stack.pop(),["backspace"]))],type:"text",class:"outline-none text-sm flex-grow min-w-[100px] bg-transparent",placeholder:"Type & Enter (e.g. Rust)..."},null,40,G),[[r,t.value.stackInput]])]),e[23]||(e[23]=l("p",{class:"text-[10px] text-gray-400 mt-1"},"Press Enter to add a skill.",-1))]),l("div",null,[e[24]||(e[24]=l("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Short Bio",-1)),s(l("textarea",{"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.bio=o),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"Brief professional summary..."},null,512),[[r,t.value.bio]])]),l("div",H,[s(l("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.featured=o),type:"checkbox",id:"feat",class:"w-4 h-4 text-black rounded border-gray-300 focus:ring-black accent-black"},null,512),[[R,t.value.featured]]),e[25]||(e[25]=l("label",{for:"feat",class:"text-sm font-bold text-gray-900 cursor-pointer"},"Featured Solver",-1))]),l("div",Q,[l("button",{type:"submit",disabled:u.value,class:"w-full py-3 bg-black text-white font-bold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},[u.value?(d(),n("span",Y)):B("",!0),p(" "+b(u.value?"Saving...":"Add Person"),1)],8,X)])],32)])}}});export{ae as default};
