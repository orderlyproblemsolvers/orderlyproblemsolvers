import{d as f,h as m,r as v,c as o,e as t,j as k,l as w,u as d,F as x,g as u,n as C,_ as D,b as r,k as A,t as i,p as N}from"./3bhyZd_0.js";import{u as L}from"./BH9fYHoZ.js";const S={class:"max-w-6xl mx-auto"},j={class:"flex items-center justify-between mb-8"},B={key:0,class:"space-y-4"},E={key:1,class:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm"},T={class:"w-full text-left border-collapse"},V={class:"divide-y divide-gray-100"},F={class:"px-6 py-4"},H={class:"text-sm font-bold text-gray-900 line-clamp-1"},M={class:"px-6 py-4"},$={class:"text-sm text-gray-600"},P={class:"px-6 py-4"},z={class:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded border border-gray-200"},I={class:"px-6 py-4"},U={class:"px-6 py-4 text-right"},G=["onClick","disabled"],K={key:0,class:"text-xs text-red-600"},R={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W={key:0,class:"p-12 text-center"},Q=f({__name:"index",async setup(Z){let n,p;const{data:c,refresh:g,status:y}=([n,p]=m(()=>L("/api/admin/stories","$G7dcejnHZK")),n=await n,p(),n),l=v(null),h=async a=>{if(confirm("Are you sure? This cannot be undone.")){l.value=a;try{await $fetch(`/api/admin/stories/${a}`,{method:"DELETE"}),await g()}catch(e){alert(e.data?.statusMessage||"Error deleting item")}finally{l.value=null}}},_=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"Draft";return(a,e)=>{const b=D;return r(),o("div",S,[t("div",j,[e[1]||(e[1]=t("h1",{class:"text-3xl font-black text-gray-900 tracking-tight"},"Stories",-1)),k(b,{to:"/admin/stories/new",class:"px-6 py-2 bg-black text-white text-sm font-bold rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2"},{default:w(()=>[...e[0]||(e[0]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),A(" Write Story ",-1)])]),_:1})]),d(y)==="pending"?(r(),o("div",B,[(r(),o(x,null,u(5,s=>t("div",{key:s,class:"h-16 bg-gray-100 rounded-lg animate-pulse"})),64))])):(r(),o("div",E,[t("table",T,[e[3]||(e[3]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-6 py-4 text-xs font-bold uppercase text-gray-500"},"Title"),t("th",{class:"px-6 py-4 text-xs font-bold uppercase text-gray-500"},"Author"),t("th",{class:"px-6 py-4 text-xs font-bold uppercase text-gray-500"},"Category"),t("th",{class:"px-6 py-4 text-xs font-bold uppercase text-gray-500"},"Published"),t("th",{class:"px-6 py-4 text-xs font-bold uppercase text-gray-500 text-right"},"Actions")])],-1)),t("tbody",V,[(r(!0),o(x,null,u(d(c),s=>(r(),o("tr",{key:s.id,class:"group hover:bg-gray-50/50 transition-colors"},[t("td",F,[t("p",H,i(s.title),1)]),t("td",M,[t("span",$,i(s.authorName||"Unknown"),1)]),t("td",P,[t("span",z,i(s.category),1)]),t("td",I,[t("span",{class:N(["text-[10px] font-bold uppercase px-2 py-1 rounded border",s.isPublished?"bg-green-50 text-green-700 border-green-100":"bg-gray-100 text-gray-500 border-gray-200"])},i(s.isPublished?_(s.publishedAt):"DRAFT"),3)]),t("td",U,[t("button",{onClick:q=>h(s.id),disabled:l.value===s.id,class:"text-gray-400 hover:text-red-600 transition-colors p-2"},[l.value===s.id?(r(),o("span",K,"Deleting...")):(r(),o("svg",R,[...e[2]||(e[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"},null,-1)])]))],8,G)])]))),128))])]),!d(c)||d(c).length===0?(r(),o("div",W,[...e[4]||(e[4]=[t("p",{class:"text-gray-400 text-sm"},"No stories found. Start writing!",-1)])])):C("",!0)]))])}}});export{Q as default};
