import{d as j,z as B,r as v,h as m,S as L,c as d,e as t,j as g,l as q,t as b,u as y,x as f,w as s,v as r,T as k,F as w,g as U,U as V,R as K,y as A,_ as z,b as u,k as S}from"./3bhyZd_0.js";import{_ as W}from"./C0XA2wFa.js";import{u as C}from"./BH9fYHoZ.js";const Z={class:"max-w-2xl mx-auto"},D={class:"flex items-center justify-between mb-8"},G={class:"flex gap-3"},H=["disabled"],J={key:0,class:"py-20 text-center"},O={class:"grid grid-cols-2 gap-6"},Q={class:"grid grid-cols-2 gap-6"},X=["value"],Y={class:"grid grid-cols-2 gap-6"},_={class:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white flex flex-wrap gap-2 items-center focus-within:border-black transition-all min-h-[46px]"},h=["onClick"],ee=["onKeydown"],te={class:"border-t border-gray-100 pt-4 space-y-3"},le={class:"flex items-center gap-3"},oe={class:"flex items-center gap-3"},ie=j({__name:"[id]",async setup(ae){let n,i;const I=A(),c=B().params.id,p=v(!1),{data:P,pending:T}=([n,i]=m(()=>C(`/api/admin/people/${c}`,"$MD35R5tpwp")),n=await n,i(),n),{data:R}=([n,i]=m(()=>C("/api/companies","$RZcCfncViv")),n=await n,i(),n),l=v({name:"",slug:"",role:"",bio:"",location:"",email:"",website:"",companyId:null,avatar:"",featured:!1,status:"approved",stack:[],stackInput:""});L(P,a=>{a&&(l.value={...l.value,...a,email:a.email||"",website:a.website||"",stack:a.stack||[],stackInput:""})},{immediate:!0});const $=()=>{const a=l.value.stackInput.trim();a&&!l.value.stack.includes(a)&&l.value.stack.push(a),l.value.stackInput=""},F=a=>{l.value.stack.splice(a,1)},x=async()=>{p.value=!0;try{await $fetch(`/api/admin/people/${c}`,{method:"PUT",body:l.value}),alert("Profile Updated Successfully!"),I.push("/admin/people")}catch(a){alert(a.data?.statusMessage||"Error updating profile")}finally{p.value=!1}};return(a,e)=>{const M=z,E=W;return u(),d("div",Z,[t("div",D,[e[14]||(e[14]=t("h1",{class:"text-2xl font-black text-gray-900"},"Edit Person",-1)),t("div",G,[g(M,{to:"/admin/people",class:"px-4 py-2 text-sm font-bold text-gray-500 hover:text-black"},{default:q(()=>[...e[13]||(e[13]=[S("Cancel",-1)])]),_:1}),t("button",{onClick:x,disabled:p.value,class:"px-6 py-2 bg-black text-white text-sm font-bold rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50"},b(p.value?"Saving...":"Save Changes"),9,H)])]),y(T)?(u(),d("div",J,[...e[15]||(e[15]=[t("div",{class:"w-8 h-8 border-2 border-gray-200 border-t-black rounded-full animate-spin mx-auto"},null,-1)])])):(u(),d("form",{key:1,onSubmit:f(x,["prevent"]),class:"space-y-6 bg-white p-8 rounded-xl border border-gray-200 shadow-sm"},[t("div",O,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Full Name",-1)),s(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.name=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors"},null,512),[[r,l.value.name]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Slug",-1)),s(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.slug=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none bg-gray-50"},null,512),[[r,l.value.slug]])])]),t("div",null,[g(E,{modelValue:l.value.avatar,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.avatar=o),label:"Profile Picture"},null,8,["modelValue"])]),t("div",Q,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Role / Title",-1)),s(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.role=o),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors"},null,512),[[r,l.value.role]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Company",-1)),s(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.companyId=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none bg-white"},[e[19]||(e[19]=t("option",{value:null},"Freelance / Unemployed",-1)),(u(!0),d(w,null,U(y(R),o=>(u(),d("option",{key:o.id,value:o.id},b(o.name),9,X))),128))],512),[[k,l.value.companyId]])])]),t("div",Y,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Email (Public)",-1)),s(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.email=o),type:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"contact@example.com"},null,512),[[r,l.value.email]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Website / Portfolio",-1)),s(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.website=o),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors",placeholder:"https://"},null,512),[[r,l.value.website]])])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Location",-1)),s(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.location=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors"},null,512),[[r,l.value.location]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-2"},"Skills / Stack",-1)),t("div",_,[(u(!0),d(w,null,U(l.value.stack,(o,N)=>(u(),d("span",{key:o,class:"bg-black text-white text-xs font-bold px-2 py-1 rounded flex items-center gap-1"},[S(b(o)+" ",1),t("button",{onClick:ne=>F(N),type:"button",class:"hover:text-gray-300"},"Ã—",8,h)]))),128)),s(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.stackInput=o),onKeydown:[V(f($,["prevent"]),["enter"]),e[9]||(e[9]=V(o=>l.value.stackInput===""&&l.value.stack.pop(),["backspace"]))],type:"text",class:"outline-none text-sm flex-grow min-w-[100px] bg-transparent",placeholder:"Type & Enter..."},null,40,ee),[[r,l.value.stackInput]])])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-xs font-bold uppercase text-gray-500 mb-1"},"Short Bio",-1)),s(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.bio=o),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-black outline-none transition-colors"},null,512),[[r,l.value.bio]])]),t("div",te,[t("div",le,[s(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.featured=o),type:"checkbox",id:"feat",class:"w-4 h-4 text-black rounded border-gray-300 focus:ring-black accent-black"},null,512),[[K,l.value.featured]]),e[26]||(e[26]=t("label",{for:"feat",class:"text-sm font-bold text-gray-900 cursor-pointer"},"Featured Solver",-1))]),t("div",oe,[e[28]||(e[28]=t("label",{class:"text-sm font-bold text-gray-500"},"Status:",-1)),s(t("select",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.value.status=o),class:"px-2 py-1 border border-gray-300 rounded text-xs font-bold uppercase"},[...e[27]||(e[27]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)])],512),[[k,l.value.status]])])])],32))])}}});export{ie as default};
